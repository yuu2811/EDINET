<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDINET 大量保有モニター</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="header-left">
            <span class="logo">EDINET</span>
            <span class="logo-sub">大量保有モニター</span>
        </div>
        <div class="header-center">
            <span id="current-time" class="clock"></span>
        </div>
        <div class="header-right">
            <span id="connection-status" class="status disconnected">
                <span class="status-dot"></span>
                <span class="status-text">接続中...</span>
            </span>
            <button id="btn-notify" class="btn-icon" title="通知を有効にする">&#128276;</button>
            <button id="btn-sound" class="btn-icon active" title="サウンド ON/OFF">&#128266;</button>
            <button id="btn-poll" class="btn-icon" title="手動ポーリング">&#8635;</button>
        </div>
    </header>

    <!-- Ticker -->
    <div id="ticker-bar">
        <div id="ticker-content">
            <span class="ticker-label">LIVE</span>
            <span id="ticker-text">起動中... EDINET APIからデータを取得しています</span>
        </div>
    </div>

    <!-- Main Layout -->
    <div id="main-layout">
        <!-- Left: Live Feed -->
        <div id="feed-panel" class="panel">
            <div class="panel-header">
                <span class="panel-title">LIVE FEED</span>
                <div class="feed-controls">
                    <input type="text" id="feed-search" placeholder="検索..." class="search-input">
                    <select id="feed-filter" class="filter-select">
                        <option value="all">すべて</option>
                        <option value="new">新規報告のみ</option>
                        <option value="change">変更報告のみ</option>
                        <option value="amendment">訂正のみ</option>
                    </select>
                </div>
            </div>
            <div id="feed-list" class="feed-list">
                <div class="feed-empty">データを読み込んでいます...</div>
            </div>
        </div>

        <!-- Right: Sidebar -->
        <div id="sidebar">
            <!-- Stats Panel -->
            <div id="stats-panel" class="panel">
                <div class="panel-header">
                    <span class="panel-title">TODAY</span>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="stat-total">-</span>
                        <span class="stat-label">提出数</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-new">-</span>
                        <span class="stat-label">新規</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-amendments">-</span>
                        <span class="stat-label">訂正</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-clients">-</span>
                        <span class="stat-label">接続数</span>
                    </div>
                </div>
            </div>

            <!-- Watchlist Panel -->
            <div id="watchlist-panel" class="panel">
                <div class="panel-header">
                    <span class="panel-title">WATCHLIST</span>
                    <button id="btn-add-watch" class="btn-small" title="銘柄を追加">+</button>
                </div>
                <div id="watchlist-form" class="watchlist-form hidden">
                    <input type="text" id="watch-name" placeholder="企業名" class="input-small">
                    <input type="text" id="watch-code" placeholder="証券コード" class="input-small">
                    <button id="btn-save-watch" class="btn-small btn-accent">追加</button>
                    <button id="btn-cancel-watch" class="btn-small">取消</button>
                </div>
                <div id="watchlist-items" class="watchlist-items">
                    <div class="watchlist-empty">ウォッチリストは空です</div>
                </div>
            </div>

            <!-- Top Filers Panel -->
            <div id="top-filers-panel" class="panel">
                <div class="panel-header">
                    <span class="panel-title">TOP FILERS</span>
                </div>
                <div id="top-filers-list" class="top-filers-list">
                    <div class="filers-empty">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detail-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">報告書詳細</span>
                <button class="modal-close">&times;</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <!-- Audio for alerts -->
    <audio id="alert-sound" preload="auto">
        <!-- We generate a short beep via Web Audio API instead -->
    </audio>

    <script src="/static/js/app.js"></script>
</body>
</html>
