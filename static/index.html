<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDINET 大量保有モニター</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="header-left">
            <span class="logo">EDINET</span>
            <span class="logo-sub">大量保有モニター</span>
        </div>
        <div class="header-center">
            <span id="current-time" class="clock"></span>
        </div>
        <div class="header-right">
            <span id="connection-status" class="connection-status disconnected" aria-live="polite" aria-atomic="true">
                <span class="status-dot disconnected" aria-hidden="true"></span>
                <span class="status-text">DISCONNECTED</span>
            </span>
            <button id="btn-notify" class="btn-icon" title="通知を有効にする" aria-label="デスクトップ通知" aria-pressed="false">&#128276;</button>
            <button id="btn-sound" class="btn-icon active" title="サウンド ON/OFF" aria-label="サウンドアラート: 有効" aria-pressed="true">&#128266;</button>
            <button id="btn-poll" class="btn-icon" title="手動ポーリング" aria-label="手動でEDINETをポーリング">&#8635;</button>
        </div>
    </header>

    <!-- Ticker -->
    <div id="ticker-bar" role="marquee" aria-label="最新の報告書">
        <div id="ticker-content">
            <span class="ticker-label">LIVE</span>
            <span id="ticker-text">起動中... EDINET APIからデータを取得しています</span>
        </div>
    </div>

    <!-- Main Layout -->
    <div id="main-layout">
        <!-- Left: Live Feed -->
        <div id="feed-panel" class="panel" role="region" aria-label="ライブフィード">
            <div class="panel-header">
                <span class="panel-title">LIVE FEED</span>
                <div class="feed-controls">
                    <label for="feed-search" class="visually-hidden">フィードを検索</label>
                    <input type="text" id="feed-search" placeholder="検索..." class="search-input" aria-label="企業名・証券コードで検索">
                    <label for="feed-filter" class="visually-hidden">報告書タイプ</label>
                    <select id="feed-filter" class="filter-select" aria-label="報告書タイプでフィルター">
                        <option value="all">すべて</option>
                        <option value="new">新規報告のみ</option>
                        <option value="change">変更報告のみ</option>
                        <option value="amendment">訂正のみ</option>
                    </select>
                </div>
            </div>
            <div id="feed-list" class="feed-list" role="feed" aria-label="報告書一覧">
                <div class="feed-empty">
                    <div class="empty-icon">&#128196;</div>
                    <div class="empty-text">報告書が見つかりません</div>
                </div>
            </div>
        </div>

        <!-- Right: Sidebar -->
        <div id="sidebar">
            <!-- Stats Panel -->
            <div id="stats-panel" class="panel" role="region" aria-label="本日の統計">
                <div class="panel-header">
                    <span class="panel-title">TODAY</span>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="stat-total">-</span>
                        <span class="stat-label">提出数</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-new">-</span>
                        <span class="stat-label">新規</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-amendments">-</span>
                        <span class="stat-label">訂正</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-clients">-</span>
                        <span class="stat-label">接続数</span>
                    </div>
                </div>
            </div>

            <!-- Watchlist Panel -->
            <div id="watchlist-panel" class="panel" role="region" aria-label="ウォッチリスト">
                <div class="panel-header">
                    <span class="panel-title">WATCHLIST</span>
                    <button id="btn-add-watch" class="btn-small" title="銘柄を追加" aria-label="ウォッチリストに銘柄を追加">+</button>
                </div>
                <div id="watchlist-form" class="watchlist-form hidden">
                    <label for="watch-name" class="visually-hidden">企業名</label>
                    <input type="text" id="watch-name" placeholder="企業名" class="input-small">
                    <label for="watch-code" class="visually-hidden">証券コード</label>
                    <input type="text" id="watch-code" placeholder="証券コード" class="input-small">
                    <button id="btn-save-watch" class="btn-small btn-accent">追加</button>
                    <button id="btn-cancel-watch" class="btn-small">取消</button>
                </div>
                <div id="watchlist-items" class="watchlist-items">
                    <div class="watchlist-empty">
                        <div class="empty-icon">&#9734;</div>
                        <div class="empty-text">ウォッチリストに企業を追加してください</div>
                    </div>
                </div>
            </div>

            <!-- Top Filers Panel -->
            <div id="top-filers-panel" class="panel" role="region" aria-label="本日の提出者ランキング">
                <div class="panel-header">
                    <span class="panel-title">TOP FILERS</span>
                </div>
                <div id="top-filers-list" class="top-filers-list">
                    <div class="filers-empty">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detail-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title-text">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="modal-title-text">報告書詳細</span>
                <button class="modal-close" aria-label="閉じる">&times;</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div id="confirm-dialog" class="modal hidden" role="alertdialog" aria-modal="true" aria-labelledby="dialog-title">
        <div class="modal-overlay"></div>
        <div class="dialog">
            <div class="dialog-title" id="dialog-title">確認</div>
            <div class="dialog-message" id="dialog-message"></div>
            <div class="dialog-actions">
                <button class="dialog-btn" id="dialog-cancel">キャンセル</button>
                <button class="dialog-btn danger" id="dialog-confirm">削除</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
